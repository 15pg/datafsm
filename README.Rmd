---
output:
  md_document:
    variant: markdown_github
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

[![Build Status](https://travis-ci.org/JohnNay/datafsm.png?branch=master)](https://travis-ci.org/JohnNay/datafsm)

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```

This R package implements our method for automatically generating models of dynamic decision-making that both have strong predictive power and are interpretable in human terms. This is useful for designing empirically grounded agent-based simulations and for gaining direct insight into observed dynamic processes. We use an efficient model representation and a genetic algorithm-based estimation process to generate simple deterministic approximations that explain most of the structure of complex stochastic processes. The GA is implemented with the GA package ([Scrucca 2013](http://www.jstatsoft.org/v53/i04/)). Our method, implemented in C++ and R, scales well to large data sets. We have applied the package to empirical data, and demonstrated the method's ability to recover known data-generating processes by simulating data with agent-based models and correctly deriving the underlying decision models for multiple agent models and degrees of stochasticity.

A user of our package can estimate models by providing their data in a common "panel data" matrix format. The package is designed to estimate any time series classification model that uses a small number of binary predictor variables and moves back and forth between the values of the outcome variable over time. Larger sets of predictor variables can be reduced to smaller sets with cross-validation. Although the predictor variables must be binary, a quantitative variable can be converted into binary by division of the observed values into high/low classes. Future releases of the package may include additional estimation methods to complement genetic algorithm optimization.

If you use this package, cite: "Nay, J., Gilligan, J. 2015. Data-Driven Dynamic Decision Models. Proceedings of the 2015 Winter Simulation Conference".

This work is supported by U.S. National Science Foundation grants EAR-1416964 and EAR-1204685.

Install and load the latest release of the package from GitHub using the `devtools` package:
```{r, eval=FALSE, include=TRUE}
install.packages("devtools")
devtools::install_github("JohnNay/datafsm")
library(datafsm)
```

```{r, eval=TRUE, include=FALSE}
devtools::install_github("JohnNay/datafsm")
library(datafsm)
install.packages(
  'printr',
  type = 'source',
  repos = c('http://yihui.name/xran', 'http://cran.rstudio.com')
)
library(printr)
```

To show how it works, create fake data:
```{r, eval=TRUE, include=TRUE}
cdata <- data.frame(period = rep(1:10, 1000),
                    outcome = rep(1:2, 5000),
                    my.decision1 = sample(1:0, 10000, TRUE),
                    other.decision1 = sample(1:0, 10000, TRUE))
```

Estimate a model with that data:
```{r, eval=TRUE, include=TRUE, message=FALSE, warning=FALSE, results='hide'}
result <- evolve_model(cdata)
```

Use the summary and plot methods on the output of the `evolve_model()` function:
```{r, eval=TRUE, include=TRUE}
summary(result)
plot(result, action_label = c("C", "D"))
```

Check out the documentation for the main function of the package to learn about all the options:
```{r, eval=TRUE, include=TRUE}
?evolve_model
````

