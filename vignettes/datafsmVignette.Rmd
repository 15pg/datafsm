---
title: "Introduction to datafsm"
author: "John J. Nay and Jonathan M. Gilligan"
date: "`r Sys.Date()`"
output:
  rmarkdown::html_vignette:
    fig_caption: yes
vignette: >
  %\VignetteIndexEntry{Introduction to datafsm}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

# Abstract

The **datafsm** package implements a method for automatically generating models of dynamic processes that both have strong predictive power and are interpretable in human terms. This is useful for gaining insight into observed dynamic processes. We use an efficient model representation and a genetic algorithm-based estimation process. This paper offers a brief overview of the package and demonstrates how to use it.

# Introduction

This R package implements our method for automatically generating models of dynamic decision-making that both have strong predictive power and are interpretable in human terms. We use an efficient model representation and a genetic algorithm-based estimation process to generate simple deterministic approximations that explain most of the structure of complex stochastic processes. The genetic algorithm is implemented with the **GA** package ([Scrucca 2013](http://www.jstatsoft.org/v53/i04/)). Our method, implemented in C++ and R, scales well to large data sets. We have applied the package to empirical data, and demonstrated the method's ability to recover known data-generating processes by simulating data with agent-based models and correctly deriving the underlying decision models for multiple agent models and degrees of stochasticity.

A user of our package can estimate models by providing their data in a common "panel data" format. The package is designed to estimate time series classification models that use a small number of binary predictor variables and move back and forth between the values of the outcome variable over time. Larger sets of predictor variables can be reduced to smaller sets with cross-validation. Although the predictor variables must be binary, a quantitative variable can be converted into binary by division of the observed values into high/low classes. Future releases of the package may include additional estimation methods to complement genetic algorithm optimization.

# Installation

Install and load the latest release of the package from [GitHub](https://github.com/JohnNay) using the `devtools` package:
```{r, eval=FALSE, include=TRUE}
install.packages("devtools")
devtools::install_github("JohnNay/datafsm")
library(datafsm)
```

Please cite the package if you use it with the text generated by:
```{r, eval=TRUE, include=FALSE}
devtools::install_github("JohnNay/datafsm")
library(datafsm)
install.packages(
  'printr',
  type = 'source',
  repos = c('http://yihui.name/xran', 'http://cran.rstudio.com')
)
library(printr)
```
```{r, eval=TRUE, include=TRUE}
citation("datafsm")
```

# Fake Data Example

To show it works, we can create fake data:
```{r, eval=TRUE, include=TRUE}
cdata <- data.frame(period = rep(1:10, 1000),
                    outcome = rep(1:2, 5000),
                    my.decision1 = sample(1:0, 10000, TRUE),
                    other.decision1 = sample(1:0, 10000, TRUE))
```

Here are the first eleven rows of this fake data:
```{r, eval=TRUE, echo=FALSE, results='asis'}
knitr::kable(head(cdata, 11))
```

Estimate a model with that data:
```{r, eval=TRUE, include=TRUE, message=FALSE, warning=FALSE, results='hide'}
res <- evolve_model(cdata)
```

Use the summary and plot methods on the output of the `evolve_model()` function:
```{r, eval=TRUE, include=TRUE, fig.width=5, fig.height=5, fig.cap="Result of `plot()` method call on `ga_fsm` object."}
summary(res)
plot(res, action_label = c("C", "D"))
```

Use the `estimation_details` method on the output of the `evolve_model()` function:
```{r, eval=TRUE, include=TRUE, fig.width=8, fig.height=6, fig.cap="Result of `plot()` method call on ga object, which is obtained by calling `estimation_details()` on `ga_fsm` object."}
suppressMessages(library(GA))
plot(estimation_details(res))
```

# Documentation for `evolve_model`

Check out the documentation for the main function of the package to learn about all the options:
```{r, eval=TRUE, include=TRUE}
?evolve_model
````

# Acknowledgements

This work is supported by U.S. National Science Foundation grants EAR-1416964 and EAR-1204685.

# Session Info

```{r, eval=TRUE, include=TRUE}
sessionInfo()
````

